require 'rest_client'
module NationalRailApiHelper

  DEBUG = true
  ARRIVAL_BOARD = "ArrivalBoard"
  DEPARTURE_BOARD = "DepartureBoard"
  DETAILED_BOARD = "ArrDepBoardWithDetails"
  TIME_OFFSET = "-10"
  URL = 'https://lite.realtime.nationalrail.co.uk/OpenLDBWS/ldb7.asmx'
  ACCESS_TOKEN = Rails.application.secrets.access_token
  SOAP_HEADERS = '<?xml version="1.0"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://thalesgroup.com/RTTI/2015-05-14/ldb/" xmlns:ns2="http://thalesgroup.com/RTTI/2010-11-01/ldb/commontypes"><SOAP-ENV:Header><ns2:AccessToken><ns2:TokenValue>' + ACCESS_TOKEN + '</ns2:TokenValue></ns2:AccessToken></SOAP-ENV:Header>'
  TEST_DATA = {
    :service => '<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetServiceDetailsResponse xmlns="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><GetServiceDetailsResult><generatedAt xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">2015-08-07T07:34:14.237919+01:00</generatedAt><serviceType xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">train</serviceType><locationName xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">Bristol Temple Meads</locationName><crs xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">BRI</crs><operator xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">First Great Western</operator><operatorCode xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">GW</operatorCode><overdueMessage xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">We were expecting the monitoring point at Bristol Temple Meads to report on this train at 07:25. This report has not been received.</overdueMessage><platform xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">15</platform><std xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">07:25</std><etd xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types">Delayed</etd><subsequentCallingPoints xmlns="http://thalesgroup.com/RTTI/2014-02-20/ldb/types"><callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><callingPoint><locationName xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Keynsham</locationName><crs xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">KYN</crs><st xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">07:31</st><et xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Delayed</et></callingPoint><callingPoint><locationName xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Oldfield Park</locationName><crs xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">OLF</crs><st xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">07:39</st><et xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Delayed</et></callingPoint><callingPoint><locationName xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Bath Spa</locationName><crs xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">BTH</crs><st xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">07:43</st><et xmlns="http://thalesgroup.com/RTTI/2012-01-13/ldb/types">Delayed</et></callingPoint></callingPointList></subsequentCallingPoints></GetServiceDetailsResult></GetServiceDetailsResponse></soap:Body></soap:Envelope>',
    DEPARTURE_BOARD => '<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetDepartureBoardResponse xmlns="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><l:GetStationBoardResult xmlns:lt3="http://thalesgroup.com/RTTI/2015-05-14/ldb/types" xmlns:lt="http://thalesgroup.com/RTTI/2012-01-13/ldb/types" xmlns:lt2="http://thalesgroup.com/RTTI/2014-02-20/ldb/types" xmlns:l="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><lt3:generatedAt>2015-08-07T07:50:32.5778205+01:00</lt3:generatedAt><lt3:locationName>Bristol Temple Meads</lt3:locationName><lt3:crs>BRI</lt3:crs><lt3:nrccMessages><lt:message>Trains between Penzance and Truro are being delayed by up to 50 minutes. More details can be found in &lt;A href="http://nationalrail.co.uk/service_disruptions/104742.aspx"&gt;Latest Travel News.&lt;/A&gt;</lt:message></lt3:nrccMessages><lt3:platformAvailable>true</lt3:platformAvailable><lt3:trainServices><lt3:service><lt3:std>07:25</lt3:std><lt3:etd>07:42</lt3:etd><lt3:platform>15</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>myuPo7ZPvSjwyo+hHMdLKw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:36</lt3:std><lt3:etd>07:42</lt3:etd><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>t+wLDFwsP20Hj7D8DGEong==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Gloucester</lt2:locationName><lt2:crs>GCR</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:45</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>0AZ9TECF7DyGXyCVVLzK/Q==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:47</lt3:std><lt3:etd>07:49</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>MdU0wY8PpjWqDTUXhOs5yA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Exeter St Davids</lt2:locationName><lt2:crs>EXD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Weymouth</lt2:locationName><lt2:crs>WEY</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:49</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>8</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>vSXXp/fnrUk+XjrX5H4/wg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:54</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>9</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>TAROhzoNd/92eh5RHtmSrQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:00</lt3:std><lt3:etd>Cancelled</lt3:etd><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>2csIprBNWkyoKv/jthsF+g==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Manchester Piccadilly</lt2:locationName><lt2:crs>MAN</lt2:crs><lt2:via>via Stoke-on-Trent</lt2:via></lt2:location></lt3:destination><lt3:currentOrigins><lt2:location><lt2:locationName>Birmingham New Street</lt2:locationName><lt2:crs>BHM</lt2:crs></lt2:location></lt3:currentOrigins></lt3:service><lt3:service><lt3:std>08:03</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>sV8jcN3gFUPof1kqCW4+mA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Avonmouth</lt2:locationName><lt2:crs>AVN</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:07</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>7</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>QX3YylfKIvC+YVfjJfzCLA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:10</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>j71kZ/TVANC8hPOM1UcsJw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:10</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>15</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>/K1wMODRABrLqXV6wWpJlg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Birmingham New Street</lt2:locationName><lt2:crs>BHM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:15</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>9</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>+LPku3jvN0WmlNzmGIJRsQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:24</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>3</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>13CTpk3kZu/hn6bR5XVMOw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:25</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>tnDAQ7SazFmvsr4f/MC+Sw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:26</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>10</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>qyr7iGnLkhMRBguCMkFbTQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Taunton</lt2:locationName><lt2:crs>TAU</lt2:crs><lt2:via>via Weston-super-Mare</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:30</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>4vPSYca6RGyvrz9gUuhzGg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Glasgow Central</lt2:locationName><lt2:crs>GLC</lt2:crs><lt2:via>via Leeds</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:34</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>7</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>RrIh6ooALbsE0MJ34IXfHw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:37</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>1</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>AVtjKpxN768wtfr49OH1Eg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Avonmouth</lt2:locationName><lt2:crs>AVN</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:41</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>ImgXgwD3p3b/P+MR3UnJuw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Great Malvern</lt2:locationName><lt2:crs>GMV</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:44</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>y4qQXw/20WXalBs0j9ar6w==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Taunton</lt2:locationName><lt2:crs>TAU</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:44</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>10</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>t6MPwTcsbbhImIl+cdulJQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Derby</lt2:locationName><lt2:crs>DBY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:51</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>udkZVona1WJ23EgvtYFNBw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:54</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>StHCI8jNEYm9zNpqZv3/ZA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:58</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>6</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>VRZyC+s1ib3Yu/6ZBJDjUw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs><lt2:via>via Weston-super-Mare</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:00</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>3</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>6CcdZMEgS4Vhi6TrBMChSA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Manchester Piccadilly</lt2:locationName><lt2:crs>MAN</lt2:crs><lt2:via>via Stoke-on-Trent</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:06</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>15</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>zAF+bi9CEWzDEgqi9vO7yQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:10</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>+szaAo5jr0kohWPrOus3mQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:13</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>10</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>Q3dmtEVcwEVmrrAq18J1ug==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:16</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>1</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>MLkWjxCVjEEwTwoaL1aoRA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Severn Beach</lt2:locationName><lt2:crs>SVB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:21</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>W6HhMlOvAwpM2IT+B44xPg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:26</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>10</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>0evhx4Zl8km7M+dadE7V0g==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:29</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>PJYnoLf/Oa0+MCX+KuHqDg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:30</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>5</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>ZG06K7HRRqz05LPezHqE2w==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Edinburgh</lt2:locationName><lt2:crs>EDB</lt2:crs><lt2:via>via Leeds</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:33</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>7</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>hVBLEB7dGGyPyZM+POopAQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service></lt3:trainServices><lt3:busServices><lt3:service><lt3:std>07:46</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>ywRWkNTgWsdPWqTAaAKeDA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>07:55</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>qPpcBDwTDcjSNyTsVc91sw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:04</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>6PmNK/S2pg29enfNqsF3Ow==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:13</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>tSvGtkRJNyrh5qlThHMe6A==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:22</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>PCWsM1ZuPTFPxCN3F52YhQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:31</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>KB1J/gN8yNx84LijjzFNRw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:40</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>sm7m/0527KzAWwE16SGAFw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:49</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>C8H7zpSofMJwD9Cvgdm20g==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>08:58</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>7FFBGYFdFLXD2iS8nP6qnQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:07</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>1N1disqSFEXLH+lMf+lW9Q==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:16</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>nZXXpfjkv3cszQMZl5zv6Q==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:25</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>O6HUbj0Uqd+DHHUDYXEN+w==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:std>09:34</lt3:std><lt3:etd>On time</lt3:etd><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>y56Dl0vC9CNeTGaJzYB0mA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:destination></lt3:service></lt3:busServices></l:GetStationBoardResult></GetDepartureBoardResponse></soap:Body></soap:Envelope>',
    ARRIVAL_BOARD => '<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetArrivalBoardResponse xmlns="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><l:GetStationBoardResult xmlns:lt3="http://thalesgroup.com/RTTI/2015-05-14/ldb/types" xmlns:lt="http://thalesgroup.com/RTTI/2012-01-13/ldb/types" xmlns:lt2="http://thalesgroup.com/RTTI/2014-02-20/ldb/types" xmlns:l="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><lt3:generatedAt>2015-08-07T07:32:34.2989085+01:00</lt3:generatedAt><lt3:locationName>Bristol Temple Meads</lt3:locationName><lt3:crs>BRI</lt3:crs><lt3:nrccMessages><lt:message>Trains between Penzance and Truro are being delayed by up to 50 minutes. More details can be found in &lt;A href="http://nationalrail.co.uk/service_disruptions/104742.aspx"&gt;Latest Travel News.&lt;/A&gt;</lt:message></lt3:nrccMessages><lt3:platformAvailable>true</lt3:platformAvailable><lt3:trainServices><lt3:service><lt3:sta>07:19</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>9oHANtlRGHWsk8w0CVBHcg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:23</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>8</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>OqBEkDl6qq1YkCDdAAquNA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:25</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>25yXVu5FGF4umD3hMOTZIQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:26</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>3</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>AC9ZcOdktFSg18a9vatumw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Edinburgh</lt2:locationName><lt2:crs>EDB</lt2:crs><lt2:via>via Leeds</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:35</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>gIcc267XQ1a8lNZKoVWCLg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:40</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>9</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>VFkxY3RgzEuMvkhKI6JK/w==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cheltenham Spa</lt2:locationName><lt2:crs>CNM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:43</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>MdU0wY8PpjWqDTUXhOs5yA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Exeter St Davids</lt2:locationName><lt2:crs>EXD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Weymouth</lt2:locationName><lt2:crs>WEY</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:51</lt3:sta><lt3:eta>Cancelled</lt3:eta><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>2csIprBNWkyoKv/jthsF+g==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Manchester Piccadilly</lt2:locationName><lt2:crs>MAN</lt2:crs><lt2:via>via Stoke-on-Trent</lt2:via></lt2:location></lt3:destination><lt3:currentOrigins><lt2:location><lt2:locationName>Birmingham New Street</lt2:locationName><lt2:crs>BHM</lt2:crs></lt2:location></lt3:currentOrigins></lt3:service><lt3:service><lt3:sta>07:58</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>7</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>QX3YylfKIvC+YVfjJfzCLA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:59</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>FcgTdFKJhStlJImwlvVmRg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Severn Beach</lt2:locationName><lt2:crs>SVB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:02</lt3:sta><lt3:eta>08:17</lt3:eta><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>ObWSSkwhv+KqECMCyUXILQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Gloucester</lt2:locationName><lt2:crs>GCR</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:05</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>15</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>/K1wMODRABrLqXV6wWpJlg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Birmingham New Street</lt2:locationName><lt2:crs>BHM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:07</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>j71kZ/TVANC8hPOM1UcsJw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:08</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>9</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>+LPku3jvN0WmlNzmGIJRsQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:09</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>3</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>13CTpk3kZu/hn6bR5XVMOw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:19</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>a4iX/jGn4THPbGbkR+5igQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:24</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>10</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>qyr7iGnLkhMRBguCMkFbTQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Taunton</lt2:locationName><lt2:crs>TAU</lt2:crs><lt2:via>via Weston-super-Mare</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:24</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>15</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>64mpj0qgdeV2MCxXjjhFpw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Taunton</lt2:locationName><lt2:crs>TAU</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:26</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>7</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>RrIh6ooALbsE0MJ34IXfHw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:27</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>4vPSYca6RGyvrz9gUuhzGg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Glasgow Central</lt2:locationName><lt2:crs>GLC</lt2:crs><lt2:via>via Leeds</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:32</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>1</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>Z4mR3mZua4TCzlkpN3/EFQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Severn Beach</lt2:locationName><lt2:crs>SVB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:36</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>8</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>ZRVlkLmDlo0a1ww3Epl/yA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Worcester Shrub Hill</lt2:locationName><lt2:crs>WOS</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:39</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>10</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>t6MPwTcsbbhImIl+cdulJQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Derby</lt2:locationName><lt2:crs>DBY</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Plymouth</lt2:locationName><lt2:crs>PLY</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:41</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>y4qQXw/20WXalBs0j9ar6w==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Taunton</lt2:locationName><lt2:crs>TAU</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:43</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>udkZVona1WJ23EgvtYFNBw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:50</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>10</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>+4M71lIAZ+7LLHW8tVqhGg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:54</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>3</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>6CcdZMEgS4Vhi6TrBMChSA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Manchester Piccadilly</lt2:locationName><lt2:crs>MAN</lt2:crs><lt2:via>via Stoke-on-Trent</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:56</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>6</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>VRZyC+s1ib3Yu/6ZBJDjUw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Paignton</lt2:locationName><lt2:crs>PGN</lt2:crs><lt2:via>via Weston-super-Mare</lt2:via></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:05</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>13</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>OSFZ5u51kwrDWrnr88Kzzw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:07</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>+szaAo5jr0kohWPrOus3mQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bath Spa</lt2:locationName><lt2:crs>BTH</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Parkway</lt2:locationName><lt2:crs>BPW</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:10</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>1</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>zPjFztUlLwGL60vhuw+YKQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Avonmouth</lt2:locationName><lt2:crs>AVN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:10</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>3</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>JZ7ZvWuatKDSpe3xVyaA4A==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Manchester Piccadilly</lt2:locationName><lt2:crs>MAN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:15</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>5</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>W6HhMlOvAwpM2IT+B44xPg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Weston-super-Mare</lt2:locationName><lt2:crs>WSM</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:19</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>11</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>Sboz2pkvuEAaxGRkFNw4Ug==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service></lt3:trainServices><lt3:busServices><lt3:service><lt3:sta>07:21</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>7tHBiw+Rj/bLa3TtsFsKJg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:30</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>mWEikiirfLkBR6fOfQg6ig==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:39</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>iuZe8IkPOPRABdIfieeylQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>07:54</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>MZhzoHKMwrmpaJcBkAFMWw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:00</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>BUS</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>4+oJmKhxBg0hBiVS6WOK+A==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Castle Cary</lt2:locationName><lt2:crs>CLC</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:07</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>9nEULxvlvuFLXpscmywq2Q==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:16</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>Pe8Sg29DA9JAckJX/HUUsw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:25</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>4h9a7dC+/DZFJgDs22ZGbQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:34</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>0nwTywbaR4WY1d9ZzjJhXQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:43</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>WcP0/4YLZfNUBqRcx7LF2Q==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>08:52</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>+f3bFQdQHf1aRZkWsg5SyQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:01</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>qyIfPZNrH35ngdOGFUFQcA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:10</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>U6p7cQJBkP6pBY/eZ16cVQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:10</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>BUS</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>rT3MlU3hNObfYhDQKnk9Bg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Castle Cary</lt2:locationName><lt2:crs>CLC</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service><lt3:service><lt3:sta>09:19</lt3:sta><lt3:eta>On time</lt3:eta><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>bus</lt3:serviceType><lt3:serviceID>Aldjb28956+GHCvWbP64ow==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Intl Airport (Bus)</lt2:locationName><lt2:crs>XPB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:destination></lt3:service></lt3:busServices></l:GetStationBoardResult></GetArrivalBoardResponse></soap:Body></soap:Envelope>',
    DETAILED_BOARD => '<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetArrDepBoardWithDetailsResponse xmlns="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><l:GetStationBoardResult xmlns:lt3="http://thalesgroup.com/RTTI/2015-05-14/ldb/types" xmlns:lt="http://thalesgroup.com/RTTI/2012-01-13/ldb/types" xmlns:lt2="http://thalesgroup.com/RTTI/2014-02-20/ldb/types" xmlns:l="http://thalesgroup.com/RTTI/2015-05-14/ldb/"><lt3:generatedAt>2015-08-01T16:38:57.0514158+01:00</lt3:generatedAt><lt3:locationName>Cardiff Central</lt3:locationName><lt3:crs>CDF</lt3:crs><lt3:platformAvailable>true</lt3:platformAvailable><lt3:trainServices><lt3:service><lt3:std>16:36</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>6</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>E6ZC50BI57LvbVdr02XAXA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Treherbert</lt2:locationName><lt2:crs>TRB</lt2:crs></lt2:location></lt3:destination><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:39</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cathays</lt:locationName><lt:crs>CYS</lt:crs><lt:st>16:42</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llandaf</lt:locationName><lt:crs>LLN</lt:crs><lt:st>16:47</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Radyr</lt:locationName><lt:crs>RDR</lt:crs><lt:st>16:50</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Taffs Well</lt:locationName><lt:crs>TAF</lt:crs><lt:st>16:54</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trefforest</lt:locationName><lt:crs>TRF</lt:crs><lt:st>17:01</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pontypridd</lt:locationName><lt:crs>PPD</lt:crs><lt:st>17:04</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trehafod</lt:locationName><lt:crs>TRH</lt:crs><lt:st>17:11</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Porth</lt:locationName><lt:crs>POR</lt:crs><lt:st>17:14</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dinas Rhondda</lt:locationName><lt:crs>DMG</lt:crs><lt:st>17:19</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Tonypandy</lt:locationName><lt:crs>TNP</lt:crs><lt:st>17:21</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llwynypia</lt:locationName><lt:crs>LLY</lt:crs><lt:st>17:23</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ystrad Rhondda</lt:locationName><lt:crs>YSR</lt:crs><lt:st>17:26</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ton Pentre</lt:locationName><lt:crs>TPN</lt:crs><lt:st>17:31</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Treorchy</lt:locationName><lt:crs>TRY</lt:crs><lt:st>17:34</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ynyswen</lt:locationName><lt:crs>YNW</lt:crs><lt:st>17:37</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Treherbert</lt:locationName><lt:crs>TRB</lt:crs><lt:st>17:43</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:39</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:41</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>6</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>JWJ6mPW9GqeJaLXnQdUsKw==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bridgend</lt2:locationName><lt2:crs>BGN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Aberdare</lt2:locationName><lt2:crs>ABA</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Bridgend</lt:locationName><lt:crs>BGN</lt:crs><lt:st>15:42</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llantwit Major</lt:locationName><lt:crs>LWM</lt:crs><lt:st>15:56</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Rhoose Cardiff Intl Airport</lt:locationName><lt:crs>RIA</lt:crs><lt:st>16:06</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Barry</lt:locationName><lt:crs>BRY</lt:crs><lt:st>16:15</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Barry Docks</lt:locationName><lt:crs>BYD</lt:crs><lt:st>16:18</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cadoxton</lt:locationName><lt:crs>CAD</lt:crs><lt:st>16:21</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dinas Powys</lt:locationName><lt:crs>DNS</lt:crs><lt:st>16:25</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Eastbrook</lt:locationName><lt:crs>EBK</lt:crs><lt:st>16:28</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cogan</lt:locationName><lt:crs>CGN</lt:crs><lt:st>16:30</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Grangetown</lt:locationName><lt:crs>GTN</lt:crs><lt:st>16:34</lt:st><lt:at>On time</lt:at></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:44</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cathays</lt:locationName><lt:crs>CYS</lt:crs><lt:st>16:47</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llandaf</lt:locationName><lt:crs>LLN</lt:crs><lt:st>16:52</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Radyr</lt:locationName><lt:crs>RDR</lt:crs><lt:st>16:55</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Taffs Well</lt:locationName><lt:crs>TAF</lt:crs><lt:st>16:58</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trefforest</lt:locationName><lt:crs>TRF</lt:crs><lt:st>17:05</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pontypridd</lt:locationName><lt:crs>PPD</lt:crs><lt:st>17:09</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Abercynon</lt:locationName><lt:crs>ACY</lt:crs><lt:st>17:18</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Penrhiwceiber</lt:locationName><lt:crs>PER</lt:crs><lt:st>17:24</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Mountain Ash</lt:locationName><lt:crs>MTA</lt:crs><lt:st>17:28</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Fernhill</lt:locationName><lt:crs>FER</lt:crs><lt:st>17:35</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cwmbach</lt:locationName><lt:crs>CMH</lt:crs><lt:st>17:39</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Aberdare</lt:locationName><lt:crs>ABA</lt:crs><lt:st>17:46</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:39</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:41</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>7</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>N5wt9cpj6NQXI2TIemIQBQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Merthyr Tydfil</lt2:locationName><lt2:crs>MER</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bridgend</lt2:locationName><lt2:crs>BGN</lt2:crs><lt2:via>via Rhoose Cardiff Int Airport</lt2:via></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Merthyr Tydfil</lt:locationName><lt:crs>MER</lt:crs><lt:st>15:38</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pentre-bach</lt:locationName><lt:crs>PTB</lt:crs><lt:st>15:42</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Troed-y-rhiw</lt:locationName><lt:crs>TRD</lt:crs><lt:st>15:45</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Merthyr Vale</lt:locationName><lt:crs>MEV</lt:crs><lt:st>15:50</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Quakers Yard</lt:locationName><lt:crs>QYD</lt:crs><lt:st>15:55</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Abercynon</lt:locationName><lt:crs>ACY</lt:crs><lt:st>15:59</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pontypridd</lt:locationName><lt:crs>PPD</lt:crs><lt:st>16:09</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trefforest</lt:locationName><lt:crs>TRF</lt:crs><lt:st>16:12</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trefforest Estate</lt:locationName><lt:crs>TRE</lt:crs><lt:st>16:16</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Taffs Well</lt:locationName><lt:crs>TAF</lt:crs><lt:st>16:20</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Radyr</lt:locationName><lt:crs>RDR</lt:crs><lt:st>16:23</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llandaf</lt:locationName><lt:crs>LLN</lt:crs><lt:st>16:26</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cathays</lt:locationName><lt:crs>CYS</lt:crs><lt:st>16:31</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:36</lt:st><lt:at>On time</lt:at></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Grangetown</lt:locationName><lt:crs>GTN</lt:crs><lt:st>16:45</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cogan</lt:locationName><lt:crs>CGN</lt:crs><lt:st>16:48</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Eastbrook</lt:locationName><lt:crs>EBK</lt:crs><lt:st>16:51</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dinas Powys</lt:locationName><lt:crs>DNS</lt:crs><lt:st>16:53</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cadoxton</lt:locationName><lt:crs>CAD</lt:crs><lt:st>16:57</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Barry Docks</lt:locationName><lt:crs>BYD</lt:crs><lt:st>17:00</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Barry</lt:locationName><lt:crs>BRY</lt:crs><lt:st>17:04</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Rhoose Cardiff Intl Airport</lt:locationName><lt:crs>RIA</lt:crs><lt:st>17:11</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llantwit Major</lt:locationName><lt:crs>LWM</lt:crs><lt:st>17:21</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Bridgend</lt:locationName><lt:crs>BGN</lt:crs><lt:st>17:39</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:43</lt3:sta><lt3:eta>16:38</lt3:eta><lt3:platform>4A</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>w/oCshuAA26pG1D0ebshDQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bristol Temple Meads</lt2:locationName><lt2:crs>BRI</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Bristol Temple Meads</lt:locationName><lt:crs>BRI</lt:crs><lt:st>15:54</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Filton Abbey Wood</lt:locationName><lt:crs>FIT</lt:crs><lt:st>16:01</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Newport (South Wales)</lt:locationName><lt:crs>NWP</lt:crs><lt:st>16:24</lt:st><lt:at>On time</lt:at></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints></lt3:service><lt3:service><lt3:std>16:45</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>1</lt3:platform><lt3:operator>CrossCountry</lt3:operator><lt3:operatorCode>XC</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>NuIM20bKqH6NDa1TRaRw8A==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Nottingham</lt2:locationName><lt2:crs>NOT</lt2:crs></lt2:location></lt3:destination><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Newport (South Wales)</lt:locationName><lt:crs>NWP</lt:crs><lt:st>16:58</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Lydney</lt:locationName><lt:crs>LYD</lt:crs><lt:st>17:23</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Gloucester</lt:locationName><lt:crs>GCR</lt:crs><lt:st>17:44</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cheltenham Spa</lt:locationName><lt:crs>CNM</lt:crs><lt:st>18:00</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>University</lt:locationName><lt:crs>UNI</lt:crs><lt:st>18:39</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Birmingham New Street</lt:locationName><lt:crs>BHM</lt:crs><lt:st>18:45</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Wilnecote</lt:locationName><lt:crs>WNE</lt:crs><lt:st>19:04</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Tamworth</lt:locationName><lt:crs>TAM</lt:crs><lt:st>19:08</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Burton-on-Trent</lt:locationName><lt:crs>BUT</lt:crs><lt:st>19:20</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Derby</lt:locationName><lt:crs>DBY</lt:crs><lt:st>19:34</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Long Eaton</lt:locationName><lt:crs>LGE</lt:crs><lt:st>19:49</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Beeston</lt:locationName><lt:crs>BEE</lt:crs><lt:st>19:57</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Nottingham</lt:locationName><lt:crs>NOT</lt:crs><lt:st>20:03</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:44</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:46</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>6</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>WHcupWUfD0dlil8jelqMeA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Penarth</lt2:locationName><lt2:crs>PEN</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Bargoed</lt2:locationName><lt2:crs>BGD</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Penarth</lt:locationName><lt:crs>PEN</lt:crs><lt:st>16:32</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dingle Road</lt:locationName><lt:crs>DGL</lt:crs><lt:st>16:34</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Grangetown</lt:locationName><lt:crs>GTN</lt:crs><lt:st>16:38</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:49</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Heath High Level</lt:locationName><lt:crs>HHL</lt:crs><lt:st>16:55</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llanishen</lt:locationName><lt:crs>LLS</lt:crs><lt:st>16:58</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Lisvane &amp; Thornhill</lt:locationName><lt:crs>LVT</lt:crs><lt:st>17:00</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Caerphilly</lt:locationName><lt:crs>CPH</lt:crs><lt:st>17:05</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Aber</lt:locationName><lt:crs>ABE</lt:crs><lt:st>17:08</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llanbradach</lt:locationName><lt:crs>LNB</lt:crs><lt:st>17:12</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ystrad Mynach</lt:locationName><lt:crs>YSM</lt:crs><lt:st>17:17</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Hengoed</lt:locationName><lt:crs>HNG</lt:crs><lt:st>17:20</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pengam</lt:locationName><lt:crs>PGM</lt:crs><lt:st>17:23</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Bargoed</lt:locationName><lt:crs>BGD</lt:crs><lt:st>17:31</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:44</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:46</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>7</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>7lZljUQv+rSnCGQgeT7BtQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Bargoed</lt2:locationName><lt2:crs>BGD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Penarth</lt2:locationName><lt2:crs>PEN</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Bargoed</lt:locationName><lt:crs>BGD</lt:crs><lt:st>16:00</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pengam</lt:locationName><lt:crs>PGM</lt:crs><lt:st>16:05</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Hengoed</lt:locationName><lt:crs>HNG</lt:crs><lt:st>16:09</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ystrad Mynach</lt:locationName><lt:crs>YSM</lt:crs><lt:st>16:12</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llanbradach</lt:locationName><lt:crs>LNB</lt:crs><lt:st>16:16</lt:st><lt:at>16:18</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Energlyn &amp; Churchill Park</lt:locationName><lt:crs>ECP</lt:crs><lt:st>16:20</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Aber</lt:locationName><lt:crs>ABE</lt:crs><lt:st>16:22</lt:st><lt:at>16:24</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Caerphilly</lt:locationName><lt:crs>CPH</lt:crs><lt:st>16:25</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Lisvane &amp; Thornhill</lt:locationName><lt:crs>LVT</lt:crs><lt:st>16:29</lt:st><lt:at>16:31</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llanishen</lt:locationName><lt:crs>LLS</lt:crs><lt:st>16:31</lt:st><lt:at>16:35</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Heath High Level</lt:locationName><lt:crs>HHL</lt:crs><lt:st>16:34</lt:st><lt:at>16:36</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:41</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Grangetown</lt:locationName><lt:crs>GTN</lt:crs><lt:st>16:50</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dingle Road</lt:locationName><lt:crs>DGL</lt:crs><lt:st>16:56</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Penarth</lt:locationName><lt:crs>PEN</lt:crs><lt:st>17:01</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:46</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:48</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>3</lt3:platform><lt3:operator>First Great Western</lt3:operator><lt3:operatorCode>GW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>E+FHA8BMT68UUdw0uvMHBQ==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>London Paddington</lt2:locationName><lt2:crs>PAD</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Swansea</lt2:locationName><lt2:crs>SWA</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>London Paddington</lt:locationName><lt:crs>PAD</lt:crs><lt:st>14:45</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Reading</lt:locationName><lt:crs>RDG</lt:crs><lt:st>15:11</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Swindon</lt:locationName><lt:crs>SWI</lt:crs><lt:st>15:38</lt:st><lt:at>15:41</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Bristol Parkway</lt:locationName><lt:crs>BPW</lt:crs><lt:st>16:08</lt:st><lt:at>16:11</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Newport (South Wales)</lt:locationName><lt:crs>NWP</lt:crs><lt:st>16:31</lt:st><lt:at>16:33</lt:at></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Bridgend</lt:locationName><lt:crs>BGN</lt:crs><lt:st>17:09</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Port Talbot Parkway</lt:locationName><lt:crs>PTA</lt:crs><lt:st>17:22</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Neath</lt:locationName><lt:crs>NTH</lt:crs><lt:st>17:30</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Swansea</lt:locationName><lt:crs>SWA</lt:crs><lt:st>17:43</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:50</lt3:sta><lt3:eta>On time</lt3:eta><lt3:std>16:51</lt3:std><lt3:etd>On time</lt3:etd><lt3:platform>6</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>hfIO3XHCezFzZmviRxLYcA==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Radyr</lt2:locationName><lt2:crs>RDR</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Coryton</lt2:locationName><lt2:crs>COY</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Radyr</lt:locationName><lt:crs>RDR</lt:crs><lt:st>16:34</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Danescourt</lt:locationName><lt:crs>DCT</lt:crs><lt:st>16:38</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Fairwater</lt:locationName><lt:crs>FRW</lt:crs><lt:st>16:40</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Waun-gron Park</lt:locationName><lt:crs>WNG</lt:crs><lt:st>16:42</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ninian Park</lt:locationName><lt:crs>NNP</lt:crs><lt:st>16:45</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints><lt3:subsequentCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:54</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Heath Low Level</lt:locationName><lt:crs>HLL</lt:crs><lt:st>17:00</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ty Glas</lt:locationName><lt:crs>TGS</lt:crs><lt:st>17:03</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Birchgrove</lt:locationName><lt:crs>BCG</lt:crs><lt:st>17:04</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Rhiwbina</lt:locationName><lt:crs>RHI</lt:crs><lt:st>17:06</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Whitchurch (Glamorgan)</lt:locationName><lt:crs>WHT</lt:crs><lt:st>17:08</lt:st><lt:et>On time</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Coryton</lt:locationName><lt:crs>COY</lt:crs><lt:st>17:13</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:subsequentCallingPoints></lt3:service><lt3:service><lt3:sta>16:53</lt3:sta><lt3:eta>On time</lt3:eta><lt3:platform>7</lt3:platform><lt3:operator>Arriva Trains Wales</lt3:operator><lt3:operatorCode>AW</lt3:operatorCode><lt3:serviceType>train</lt3:serviceType><lt3:serviceID>ys3M+R5tbz/2ynCUR+GkSg==</lt3:serviceID><lt3:origin><lt2:location><lt2:locationName>Treherbert</lt2:locationName><lt2:crs>TRB</lt2:crs></lt2:location></lt3:origin><lt3:destination><lt2:location><lt2:locationName>Cardiff Central</lt2:locationName><lt2:crs>CDF</lt2:crs></lt2:location></lt3:destination><lt3:previousCallingPoints><lt2:callingPointList serviceType="train" serviceChangeRequired="false" assocIsCancelled="false"><lt2:callingPoint><lt:locationName>Treherbert</lt:locationName><lt:crs>TRB</lt:crs><lt:st>15:47</lt:st><lt:at>On time</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ynyswen</lt:locationName><lt:crs>YNW</lt:crs><lt:st>15:49</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Treorchy</lt:locationName><lt:crs>TRY</lt:crs><lt:st>15:51</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ton Pentre</lt:locationName><lt:crs>TPN</lt:crs><lt:st>15:53</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Ystrad Rhondda</lt:locationName><lt:crs>YSR</lt:crs><lt:st>15:58</lt:st><lt:at>16:00</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llwynypia</lt:locationName><lt:crs>LLY</lt:crs><lt:st>16:00</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Tonypandy</lt:locationName><lt:crs>TNP</lt:crs><lt:st>16:03</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Dinas Rhondda</lt:locationName><lt:crs>DMG</lt:crs><lt:st>16:05</lt:st><lt:at>No report</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Porth</lt:locationName><lt:crs>POR</lt:crs><lt:st>16:09</lt:st><lt:at>16:12</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trehafod</lt:locationName><lt:crs>TRH</lt:crs><lt:st>16:12</lt:st><lt:at>16:17</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Pontypridd</lt:locationName><lt:crs>PPD</lt:crs><lt:st>16:18</lt:st><lt:at>16:21</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Trefforest</lt:locationName><lt:crs>TRF</lt:crs><lt:st>16:21</lt:st><lt:at>16:24</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Taffs Well</lt:locationName><lt:crs>TAF</lt:crs><lt:st>16:28</lt:st><lt:at>16:31</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Radyr</lt:locationName><lt:crs>RDR</lt:crs><lt:st>16:32</lt:st><lt:at>16:35</lt:at></lt2:callingPoint><lt2:callingPoint><lt:locationName>Llandaf</lt:locationName><lt:crs>LLN</lt:crs><lt:st>16:34</lt:st><lt:et>16:38</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cathays</lt:locationName><lt:crs>CYS</lt:crs><lt:st>16:39</lt:st><lt:et>16:43</lt:et></lt2:callingPoint><lt2:callingPoint><lt:locationName>Cardiff Queen Street</lt:locationName><lt:crs>CDQ</lt:crs><lt:st>16:46</lt:st><lt:et>On time</lt:et></lt2:callingPoint></lt2:callingPointList></lt3:previousCallingPoints></lt3:service></lt3:trainServices></l:GetStationBoardResult></GetArrDepBoardWithDetailsResponse></soap:Body></soap:Envelope>'
  }


  def self.get_departure_board crs
    return get_board DEPARTURE_BOARD, crs
  end


  def self.get_arrival_board crs
    return get_board ARRIVAL_BOARD, crs
  end


  def self.get_detailed_board crs
    return get_board DETAILED_BOARD, crs
  end


  def self.get_service service_id
    soap_body = '<SOAP-ENV:Body><ns1:GetServiceDetailsRequest><ns1:serviceID>' + service_id + '</ns1:serviceID></ns1:GetServiceDetailsRequest></SOAP-ENV:Body></SOAP-ENV:Envelope>'
    begin
      if DEBUG
        service_id = "myuPo7ZPvSjwyo%2BhHMdLKw=="
        xml = Nokogiri::XML(TEST_DATA[:service])
      else
        response = RestClient.post URL, SOAP_HEADERS + soap_body, content_type: 'text/xml'
        puts response.body
        xml = Nokogiri::XML(response.body)
      end
    rescue => e
      puts e.inspect
      return
    end
    xml.remove_namespaces!
    service = Service.new
    service.id = service_id
    service.service_type = xml.css('serviceType').text
    service.is_cancelled = !xml.css('isCancelled').empty?
    service.disruption_reason = ActionView::Base.full_sanitizer.sanitize(xml.css('disruptionReason').text)
    service.overdue_message = ActionView::Base.full_sanitizer.sanitize(xml.css('overdueMessage').text)
    service.station = Station.find_by crs: xml.css('crs').first.text
    service.operator = Operator.find_by code: xml.css('operatorCode').text
    service.platform = xml.css('platform').text
    service.sta = convert_time_string_to_datetime xml.css('sta').text
    service.eta = convert_time_string_to_datetime xml.css('eta').text
    service.ata = convert_time_string_to_datetime xml.css('ata').text
    service.std = convert_time_string_to_datetime xml.css('std').text
    service.etd = convert_time_string_to_datetime xml.css('etd').text
    service.atd = convert_time_string_to_datetime xml.css('atd').text
    service.previous_calling_points = []
    service.subsequent_calling_points = []
    if xml.css('previousCallingPoints').children.size > 0
      xml.css('previousCallingPoints').css('callingPoint').each do |calling_point_xml|
        calling_point = CallingPoint.new
        calling_point.station = Station.find_by crs: calling_point_xml.css('crs').text
        calling_point.st = convert_time_string_to_datetime calling_point_xml.css('st').text
        calling_point.at = convert_time_string_to_datetime calling_point_xml.css('at').text
        estimate = calling_point_xml.css('et').text
        if estimate.include? ':'
          calling_point.et = convert_time_string_to_datetime estimate
          calling_point.cancelled = false
          calling_point.delayed = calling_point.et != calling_point.st
        elsif estimate == 'Cancelled'
          calling_point.cancelled = true
          calling_point.delayed = false
        elsif estimate == 'Delayed'
          calling_point.cancelled = false
          calling_point.delayed = true
        else
          calling_point.cancelled = false
          calling_point.delayed = false
        end
        service.previous_calling_points << calling_point
      end
    end
    if xml.css('subsequentCallingPoints').children.size > 0
      xml.css('subsequentCallingPoints').css('callingPoint').each do |calling_point_xml|
        calling_point = CallingPoint.new
        calling_point.station = Station.find_by crs: calling_point_xml.css('crs').text
        calling_point.st = convert_time_string_to_datetime calling_point_xml.css('st').text
        calling_point.at = convert_time_string_to_datetime calling_point_xml.css('at').text
        estimate = calling_point_xml.css('et').text
        if estimate.include? ':'
          calling_point.et = convert_time_string_to_datetime estimate
          calling_point.cancelled = false
          calling_point.delayed = calling_point.et != calling_point.st
        elsif estimate == 'Cancelled'
          calling_point.et = nil
          calling_point.cancelled = true
          calling_point.delayed = false
        elsif estimate == 'Delayed'
          calling_point.et = nil
          calling_point.cancelled = false
          calling_point.delayed = true
        else
          calling_point.et = nil
          calling_point.cancelled = false
          calling_point.delayed = false
        end
        service.subsequent_calling_points << calling_point
      end
    end
    return service
  end


  protected

  def self.get_board type, crs
    # If we are getting full details then do not use offset as you loose the details
    if type == DETAILED_BOARD
      offset = ''
    else
      offset = '<ns1:timeOffset>' + TIME_OFFSET + '</ns1:timeOffset>'
    end
    soap_body = '<SOAP-ENV:Body><ns1:Get' + type + 'Request><ns1:crs>' + crs + '</ns1:crs>' + offset + '</ns1:Get' + type + 'Request></SOAP-ENV:Body></SOAP-ENV:Envelope>'
    begin
      if DEBUG
        xml = Nokogiri::XML(TEST_DATA[type])
      else
        response = RestClient.post URL, SOAP_HEADERS + soap_body, content_type: 'text/xml'
        puts response.body
        xml = Nokogiri::XML(response.body)
      end
    rescue => e
      puts e.inspect
      return
    end
    xml.remove_namespaces!
    station_board = StationBoard.new
    xml.css('nrccMessages').children.each do |message|
      station_board.nrcc_messages << ActionView::Base.full_sanitizer.sanitize(message.text)
    end
    xml.css('trainServices').children.each do |train_service_xml|
      service_item = ServiceItem.new
      service_item.origin = Station.find_by crs: train_service_xml.css('origin crs').text
      service_item.destination = Station.find_by crs: train_service_xml.css('destination crs').text

      service_item.sta = convert_time_string_to_datetime train_service_xml.css('sta').text
      estimate = train_service_xml.css('eta').text
      if estimate == 'On time'
        service_item.eta = service_item.sta
        service_item.delayed = false
        service_item.cancelled = false
      elsif estimate.include? ':'
        service_item.eta = convert_time_string_to_datetime estimate
        service_item.delayed = service_item.eta != service_item.sta
        service_item.cancelled = false
      elsif estimate == 'Delayed'
        service_item.eta = nil
        service_item.delayed = true
        service_item.cancelled = false
      elsif estimate == 'Cancelled'
        service_item.eta = nil
        service_item.delayed = false
        service_item.cancelled = true
      end

      service_item.std = convert_time_string_to_datetime train_service_xml.css('std').text
      estimate = train_service_xml.css('etd').text
      if estimate == 'On time'
        service_item.etd = service_item.std
        service_item.delayed = false
        service_item.cancelled = false
      elsif estimate.include? ':'
        service_item.etd = convert_time_string_to_datetime estimate
        service_item.delayed service_item.etd != service_item.std
        service_item.cancelled = false
      elsif estimate == 'Delayed'
        service_item.etd = nil
        service_item.delayed = true
        service_item.cancelled = false
      elsif estimate == 'Cancelled'
        service_item.etd = nil
        service_item.delayed = false
        service_item.cancelled = true
      end

      service_item.platform = train_service_xml.css('platform').text
      service_item.operator = Operator.find_by code: train_service_xml.css('operatorCode').text
      service_item.service_id = train_service_xml.css('serviceID').text

      service_item.previous_calling_points = []
      service_item.subsequent_calling_points = []
      if train_service_xml.css('previousCallingPoints').children.size > 0
        train_service_xml.css('previousCallingPoints').css('callingPoint').each do |calling_point_xml|
          calling_point = CallingPoint.new
          calling_point.station = Station.find_by crs: calling_point_xml.css('crs').text
          calling_point.st = calling_point_xml.css('st').text
          calling_point.et = calling_point_xml.css('et').text
          calling_point.at = calling_point_xml.css('at').text
          service_item.previous_calling_points << calling_point
        end
      end
      if train_service_xml.css('subsequentCallingPoints').children.size > 0
        train_service_xml.css('subsequentCallingPoints').css('callingPoint').each do |calling_point_xml|
          calling_point = CallingPoint.new
          calling_point.station = Station.find_by crs: calling_point_xml.css('crs').text
          calling_point.st = calling_point_xml.css('st').text
          calling_point.et = calling_point_xml.css('et').text
          calling_point.at = calling_point_xml.css('at').text
          service_item.subsequent_calling_points << calling_point
        end
      end

      station_board.train_services << service_item
    end
    return station_board
  end


  def self.convert_time_string_to_datetime string
    if string.nil? or string.empty?
      return
    elsif string.include? ':'
      now = DateTime.now
      time = string.split(':')
      # TODO Fix midnight rollovers, if time is in past, add 1 day
      begin
        return DateTime.new(now.year, now.month, now.day, time[0].to_i, time[1].to_i)
      rescue => e
        puts e.inspect
        return
      end
    end 
  end


end
