<% provide(:title, @station) %>
<% provide(:description, "Real-time train information for #{@station}.") %>

<div class="container">
	<h1><%= @station %></h1>

<%= render 'navigation' %>

	<div class="row">
		<div class="col-md-4">

			<img class="img-thumbnail" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwBBACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" style="width:180px;height:180px">

			<h3>Details</h3>
			<p><%= @station.address %></p>
			<p><%= link_to @station.phone %></p>

			<h3>Facilities</h3>
			<table class="table-striped">
				<% @station.facilities.each do |k,v | %>
				<tr>
					<td><%= k %></td>
					<td><%= v %></td>
				</tr>
			<% end %>
			</table>

		</div>
		<div class="col-md-4">

		</div>

	<% if signed_in? %>
		<div class="col-md-4">
			<div class="well">

			<% if current_user.home_station == @station %>
				<div class="form-group">
					<button class="btn btn-primary btn-lg btn-block disabled"><%= icon('home') %> My Home Station</button>
				</div>
			<% else %>
				<%= form_for(:user, as: :user, url: registration_path(:user), html: { method: :put }) do |f| %>
					<%= f.hidden_field :home_station_id, value: @station.id %>
					<div class="form-group">
						<button class="btn btn-primary btn-lg btn-block"><%= icon('home') %> Make my Home</button>
					</div>
				<% end %>
			<% end %>

			<% if current_user.work_station == @station %>
				<button class="btn btn-primary btn-lg btn-block disabled"><%= icon('briefcase') %> My Work Station</button>
			<% else %>
				<%= form_for(:user, as: :user, url: registration_path(:user), html: { method: :put }) do |f| %>
					<%= f.hidden_field :work_station_id, value: @station.id %>
					<button class="btn btn-info btn-lg btn-block"><%= icon('briefcase') %> Make my Work</button>
				<% end %>
			<% end %>

			</div>
		</div>
	<% end %>
	</div>

</div>
